{"version":3,"sources":["lib/phaser-input.js"],"names":["__extends","extendStatics","Object","setPrototypeOf","__proto__","Array","d","b","p","hasOwnProperty","__","constructor","prototype","create","PhaserInput","InputType","InputElement","game","id","type","value","focusIn","focusOut","text","_this","canvasTopX","canvas","getBoundingClientRect","top","document","body","scrollTop","element","createElement","style","position","left","toString","width","height","border","addEventListener","Phaser","Signal","dispatch","appendChild","addKeyUpListener","callback","keyUpCallback","blockKeyDownEvents","preventKeyPropagation","evt","stopPropagation","event","cancelBubble","unblockKeyDownEvents","removeEventListener","destroy","removeChild","setMax","max","min","undefined","password","maxLength","parseInt","number","defineProperty","get","set","enumerable","configurable","focus","device","desktop","chrome","originalWidth_1","window","innerWidth","originalHeight_1","innerHeight","kbAppeared_1","interval_1","setInterval","clearInterval","blur","selectionStart","selectionEnd","getCaretPosition","setCaretPosition","pos","setSelectionRange","ForceCase","InputField","_super","x","y","inputOptions","call","focusOutOnEnter","placeHolder","box","windowScale","blockInput","blink","cnt","padding","textAlign","forceCase","none","borderRadius","fillAlpha","selectionColor","zoom","InputBox","setTexture","generateTexture","textMask","TextMask","addChild","domElement","Math","random","selection","SelectionHighlight","mask","length","Text","font","fontWeight","fill","placeHolderColor","cursor","cursorColor","visible","offscreenText","updateTextAlignment","inputEnabled","input","useHandCursor","onDown","add","checkDown","KeyboardOpen","endFocus","zoomOut","resize","anchor","e","resetText","checkPointerOver","setCaretOnclick","Zoomed","zoomIn","startFocus","update","setTimeout","onKeyboardClose","keyUpProcessor","onKeyboardOpen","keyListener","bind","updateText","i","val","setText","updateCursor","caretPosition","slice","localX","toLocal","PIXI","Point","world","characterWidth","index","updateSelection","hasSelection","substring","caretStart","caretEnd","getBounds","clear","bounds","offsetX","scale","pivot","getFormattedText","keyCode","preventDefault","destroyChildren","remove","removeAll","lower","toLowerCase","upper","toUpperCase","Sprite","bgColor","backgroundColor","borderWidth","borderColor","boxAlpha","substr","indexOf","boxHeight","boxWidth","drawBox","newWidth","beginFill","lineStyle","drawRoundedRect","drawRect","Graphics","rect","color","Color","webToColor","rgb2hex","a","r","g","maskWidth","maskHeight","drawMask","endFill","Plugin","parent","addInputFieldFactory","GameObjectFactory","inputField","group","nineSliceObject","GameObjectCreator"],"mappings":"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","file":"phaser-input.6e57b294.js","sourceRoot":"..","sourcesContent":["/*!\r\n * phaser-input - version 2.0.5 \r\n * Adds input boxes to Phaser like CanvasInput, but also works for WebGL and Mobile, made for Phaser only.\r\n *\r\n * Azerion\r\n * Build at 18-03-2019\r\n * Released under MIT License \r\n */\r\n\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar PhaserInput;\r\n(function (PhaserInput) {\r\n    var InputType;\r\n    (function (InputType) {\r\n        InputType[InputType[\"text\"] = 0] = \"text\";\r\n        InputType[InputType[\"password\"] = 1] = \"password\";\r\n        InputType[InputType[\"number\"] = 2] = \"number\";\r\n    })(InputType = PhaserInput.InputType || (PhaserInput.InputType = {}));\r\n    var InputElement = (function () {\r\n        function InputElement(game, id, type, value, focusIn, focusOut) {\r\n            if (type === void 0) { type = InputType.text; }\r\n            if (value === void 0) { value = ''; }\r\n            var _this = this;\r\n            this.id = id;\r\n            this.type = type;\r\n            this.game = game;\r\n            this.focusIn = focusIn;\r\n            this.focusOut = focusOut;\r\n            var canvasTopX = this.game.canvas.getBoundingClientRect().top + document.body.scrollTop;\r\n            this.element = document.createElement('input');\r\n            this.element.id = id;\r\n            this.element.style.position = 'absolute';\r\n            this.element.style.top = canvasTopX + 'px';\r\n            this.element.style.left = (-40).toString() + 'px';\r\n            this.element.style.width = (10).toString() + 'px';\r\n            this.element.style.height = (10).toString() + 'px';\r\n            this.element.style.border = '0px';\r\n            this.element.value = this.value;\r\n            this.element.type = InputType[type];\r\n            this.element.addEventListener('focusin', function () {\r\n                if (_this.focusIn instanceof Phaser.Signal) {\r\n                    _this.focusIn.dispatch();\r\n                }\r\n            });\r\n            this.element.addEventListener('focusout', function () {\r\n                if (_this.focusOut instanceof Phaser.Signal) {\r\n                    _this.focusOut.dispatch();\r\n                }\r\n            });\r\n            document.body.appendChild(this.element);\r\n        }\r\n        InputElement.prototype.addKeyUpListener = function (callback) {\r\n            this.keyUpCallback = callback;\r\n            document.addEventListener('keyup', this.keyUpCallback);\r\n            this.element.addEventListener('input', this.keyUpCallback);\r\n        };\r\n        InputElement.prototype.blockKeyDownEvents = function () {\r\n            document.addEventListener('keydown', this.preventKeyPropagation);\r\n        };\r\n        InputElement.prototype.preventKeyPropagation = function (evt) {\r\n            if (evt.stopPropagation) {\r\n                evt.stopPropagation();\r\n            }\r\n            else {\r\n                event.cancelBubble = true;\r\n            }\r\n        };\r\n        InputElement.prototype.unblockKeyDownEvents = function () {\r\n            document.removeEventListener('keydown', this.preventKeyPropagation);\r\n        };\r\n        InputElement.prototype.removeEventListener = function () {\r\n            document.removeEventListener('keyup', this.keyUpCallback);\r\n            this.element.removeEventListener('input', this.keyUpCallback);\r\n        };\r\n        InputElement.prototype.destroy = function () {\r\n            document.body.removeChild(this.element);\r\n        };\r\n        InputElement.prototype.setMax = function (max, min) {\r\n            if (max === undefined) {\r\n                return;\r\n            }\r\n            if (this.type === InputType.text || this.type === InputType.password) {\r\n                this.element.maxLength = parseInt(max, 10);\r\n            }\r\n            else if (this.type === InputType.number) {\r\n                this.element.max = max;\r\n                if (min === undefined) {\r\n                    return;\r\n                }\r\n                this.element.min = min;\r\n            }\r\n        };\r\n        Object.defineProperty(InputElement.prototype, \"value\", {\r\n            get: function () {\r\n                return this.element.value;\r\n            },\r\n            set: function (value) {\r\n                this.element.value = value;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        InputElement.prototype.focus = function () {\r\n            var _this = this;\r\n            this.element.focus();\r\n            if (!this.game.device.desktop && this.game.device.chrome) {\r\n                var originalWidth_1 = window.innerWidth, originalHeight_1 = window.innerHeight;\r\n                var kbAppeared_1 = false;\r\n                var interval_1 = setInterval(function () {\r\n                    if (originalWidth_1 > window.innerWidth || originalHeight_1 > window.innerHeight) {\r\n                        kbAppeared_1 = true;\r\n                    }\r\n                    if (kbAppeared_1 && originalWidth_1 === window.innerWidth && originalHeight_1 === window.innerHeight) {\r\n                        if (_this.focusOut instanceof Phaser.Signal) {\r\n                            _this.focusOut.dispatch();\r\n                        }\r\n                        clearInterval(interval_1);\r\n                    }\r\n                }, 50);\r\n            }\r\n        };\r\n        InputElement.prototype.blur = function () {\r\n            this.element.blur();\r\n        };\r\n        Object.defineProperty(InputElement.prototype, \"hasSelection\", {\r\n            get: function () {\r\n                if (this.type === InputType.number) {\r\n                    return false;\r\n                }\r\n                return this.element.selectionStart !== this.element.selectionEnd;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        Object.defineProperty(InputElement.prototype, \"caretStart\", {\r\n            get: function () {\r\n                return this.element.selectionEnd;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        Object.defineProperty(InputElement.prototype, \"caretEnd\", {\r\n            get: function () {\r\n                return this.element.selectionStart;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        InputElement.prototype.getCaretPosition = function () {\r\n            if (this.type === InputType.number) {\r\n                return -1;\r\n            }\r\n            return this.element.selectionStart;\r\n        };\r\n        InputElement.prototype.setCaretPosition = function (pos) {\r\n            if (this.type === InputType.number) {\r\n                return;\r\n            }\r\n            this.element.setSelectionRange(pos, pos);\r\n        };\r\n        return InputElement;\r\n    }());\r\n    PhaserInput.InputElement = InputElement;\r\n})(PhaserInput || (PhaserInput = {}));\r\nvar PhaserInput;\r\n(function (PhaserInput) {\r\n    var ForceCase;\r\n    (function (ForceCase) {\r\n        ForceCase[ForceCase[\"none\"] = 0] = \"none\";\r\n        ForceCase[ForceCase[\"lower\"] = 1] = \"lower\";\r\n        ForceCase[ForceCase[\"upper\"] = 2] = \"upper\";\r\n    })(ForceCase = PhaserInput.ForceCase || (PhaserInput.ForceCase = {}));\r\n    var InputField = (function (_super) {\r\n        __extends(InputField, _super);\r\n        function InputField(game, x, y, inputOptions) {\r\n            if (inputOptions === void 0) { inputOptions = {}; }\r\n            var _this = _super.call(this, game, x, y) || this;\r\n            _this.focusOutOnEnter = true;\r\n            _this.placeHolder = null;\r\n            _this.box = null;\r\n            _this.focus = false;\r\n            _this.value = '';\r\n            _this.windowScale = 1;\r\n            _this.blockInput = true;\r\n            _this.focusIn = new Phaser.Signal();\r\n            _this.focusOut = new Phaser.Signal();\r\n            _this.blink = true;\r\n            _this.cnt = 0;\r\n            _this.inputOptions = inputOptions;\r\n            _this.inputOptions.width = (typeof inputOptions.width === 'number') ? inputOptions.width : 150;\r\n            _this.inputOptions.padding = (typeof inputOptions.padding === 'number') ? inputOptions.padding : 0;\r\n            _this.inputOptions.textAlign = inputOptions.textAlign || 'left';\r\n            _this.inputOptions.type = inputOptions.type || PhaserInput.InputType.text;\r\n            _this.inputOptions.forceCase = (inputOptions.forceCase) ? inputOptions.forceCase : ForceCase.none;\r\n            _this.inputOptions.borderRadius = (typeof inputOptions.borderRadius === 'number') ? inputOptions.borderRadius : 0;\r\n            _this.inputOptions.height = (typeof inputOptions.height === 'number') ? inputOptions.height : 14;\r\n            _this.inputOptions.fillAlpha = (inputOptions.fillAlpha === undefined) ? 1 : inputOptions.fillAlpha;\r\n            _this.inputOptions.selectionColor = inputOptions.selectionColor || 'rgba(179, 212, 253, 0.8)';\r\n            _this.inputOptions.zoom = (!game.device.desktop) ? inputOptions.zoom || false : false;\r\n            _this.box = new PhaserInput.InputBox(_this.game, inputOptions);\r\n            _this.setTexture(_this.box.generateTexture());\r\n            _this.textMask = new PhaserInput.TextMask(_this.game, inputOptions);\r\n            _this.addChild(_this.textMask);\r\n            _this.domElement = new PhaserInput.InputElement(_this.game, 'phaser-input-' + (Math.random() * 10000 | 0).toString(), _this.inputOptions.type, _this.value, _this.focusIn, _this.focusOut);\r\n            _this.domElement.setMax(_this.inputOptions.max, _this.inputOptions.min);\r\n            _this.selection = new PhaserInput.SelectionHighlight(_this.game, _this.inputOptions);\r\n            _this.selection.mask = _this.textMask;\r\n            _this.addChild(_this.selection);\r\n            if (inputOptions.placeHolder && inputOptions.placeHolder.length > 0) {\r\n                _this.placeHolder = new Phaser.Text(game, _this.inputOptions.padding, _this.inputOptions.padding, inputOptions.placeHolder, {\r\n                    font: inputOptions.font || '14px Arial',\r\n                    fontWeight: inputOptions.fontWeight || 'normal',\r\n                    fill: inputOptions.placeHolderColor || '#bfbebd'\r\n                });\r\n                _this.placeHolder.mask = _this.textMask;\r\n                _this.addChild(_this.placeHolder);\r\n            }\r\n            _this.cursor = new Phaser.Text(game, _this.inputOptions.padding, _this.inputOptions.padding - 2, '|', {\r\n                font: inputOptions.font || '14px Arial',\r\n                fontWeight: inputOptions.fontWeight || 'normal',\r\n                fill: inputOptions.cursorColor || '#000000'\r\n            });\r\n            _this.cursor.visible = false;\r\n            _this.addChild(_this.cursor);\r\n            _this.text = new Phaser.Text(game, _this.inputOptions.padding, _this.inputOptions.padding, '', {\r\n                font: inputOptions.font || '14px Arial',\r\n                fontWeight: inputOptions.fontWeight || 'normal',\r\n                fill: inputOptions.fill || '#000000'\r\n            });\r\n            _this.text.mask = _this.textMask;\r\n            _this.addChild(_this.text);\r\n            _this.offscreenText = new Phaser.Text(game, _this.inputOptions.padding, _this.inputOptions.padding, '', {\r\n                font: inputOptions.font || '14px Arial',\r\n                fontWeight: inputOptions.fontWeight || 'normal',\r\n                fill: inputOptions.fill || '#000000'\r\n            });\r\n            _this.updateTextAlignment();\r\n            _this.inputEnabled = true;\r\n            _this.input.useHandCursor = true;\r\n            _this.game.input.onDown.add(_this.checkDown, _this);\r\n            _this.focusOut.add(function () {\r\n                if (PhaserInput.KeyboardOpen) {\r\n                    _this.endFocus();\r\n                    if (_this.inputOptions.zoom) {\r\n                        _this.zoomOut();\r\n                    }\r\n                }\r\n            });\r\n            return _this;\r\n        }\r\n        Object.defineProperty(InputField.prototype, \"width\", {\r\n            get: function () {\r\n                return this.inputOptions.width;\r\n            },\r\n            set: function (width) {\r\n                this.inputOptions.width = width;\r\n                this.box.resize(width);\r\n                this.textMask.resize(width);\r\n                this.updateTextAlignment();\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        InputField.prototype.updateTextAlignment = function () {\r\n            switch (this.inputOptions.textAlign) {\r\n                case 'left':\r\n                    this.text.anchor.set(0, 0);\r\n                    this.text.x = this.inputOptions.padding;\r\n                    if (null !== this.placeHolder) {\r\n                        this.placeHolder.anchor.set(0, 0);\r\n                    }\r\n                    this.cursor.x = this.inputOptions.padding + this.getCaretPosition();\r\n                    break;\r\n                case 'center':\r\n                    this.text.anchor.set(0.5, 0);\r\n                    this.text.x = this.inputOptions.padding + this.inputOptions.width / 2;\r\n                    if (null !== this.placeHolder) {\r\n                        this.placeHolder.anchor.set(0.5, 0);\r\n                        this.placeHolder.x = this.inputOptions.padding + this.inputOptions.width / 2;\r\n                    }\r\n                    this.cursor.x = this.inputOptions.padding + this.inputOptions.width / 2 - this.text.width / 2 + this.getCaretPosition();\r\n                    break;\r\n                case 'right':\r\n                    this.text.anchor.set(1, 0);\r\n                    this.text.x = this.inputOptions.padding + this.inputOptions.width;\r\n                    if (null !== this.placeHolder) {\r\n                        this.placeHolder.anchor.set(1, 0);\r\n                        this.placeHolder.x = this.inputOptions.padding + this.inputOptions.width;\r\n                    }\r\n                    this.cursor.x = this.inputOptions.padding + this.inputOptions.width;\r\n                    break;\r\n            }\r\n        };\r\n        InputField.prototype.checkDown = function (e) {\r\n            if (!this.value) {\r\n                this.resetText();\r\n            }\r\n            if (this.input.checkPointerOver(e)) {\r\n                if (this.focus) {\r\n                    this.setCaretOnclick(e);\r\n                    return;\r\n                }\r\n                if (this.inputOptions.zoom && !PhaserInput.Zoomed) {\r\n                    this.zoomIn();\r\n                }\r\n                this.startFocus();\r\n            }\r\n            else {\r\n                if (this.focus === true) {\r\n                    this.endFocus();\r\n                    if (this.inputOptions.zoom) {\r\n                        this.zoomOut();\r\n                    }\r\n                }\r\n            }\r\n        };\r\n        InputField.prototype.update = function () {\r\n            this.text.update();\r\n            if (this.placeHolder) {\r\n                this.placeHolder.update();\r\n            }\r\n            if (!this.focus) {\r\n                return;\r\n            }\r\n            if (this.cnt !== 30) {\r\n                return this.cnt++;\r\n            }\r\n            this.cursor.visible = this.blink;\r\n            this.blink = !this.blink;\r\n            this.cnt = 0;\r\n        };\r\n        InputField.prototype.endFocus = function () {\r\n            var _this = this;\r\n            if (!this.focus) {\r\n                return;\r\n            }\r\n            this.domElement.removeEventListener();\r\n            if (this.blockInput === true) {\r\n                this.domElement.unblockKeyDownEvents();\r\n            }\r\n            this.focus = false;\r\n            if (this.value.length === 0 && null !== this.placeHolder) {\r\n                this.placeHolder.visible = true;\r\n            }\r\n            this.cursor.visible = false;\r\n            if (this.game.device.desktop) {\r\n                setTimeout(function () {\r\n                    _this.domElement.blur();\r\n                }, 0);\r\n            }\r\n            else {\r\n                this.domElement.blur();\r\n            }\r\n            if (!this.game.device.desktop) {\r\n                PhaserInput.KeyboardOpen = false;\r\n                PhaserInput.onKeyboardClose.dispatch();\r\n            }\r\n        };\r\n        InputField.prototype.startFocus = function () {\r\n            var _this = this;\r\n            this.focus = true;\r\n            if (null !== this.placeHolder) {\r\n                this.placeHolder.visible = false;\r\n            }\r\n            if (this.game.device.desktop) {\r\n                setTimeout(function () {\r\n                    _this.keyUpProcessor();\r\n                }, 0);\r\n            }\r\n            else {\r\n                this.keyUpProcessor();\r\n            }\r\n            if (!this.game.device.desktop) {\r\n                PhaserInput.KeyboardOpen = true;\r\n                PhaserInput.onKeyboardOpen.dispatch();\r\n            }\r\n        };\r\n        InputField.prototype.keyUpProcessor = function () {\r\n            this.domElement.addKeyUpListener(this.keyListener.bind(this));\r\n            this.domElement.focus();\r\n            if (this.blockInput === true) {\r\n                this.domElement.blockKeyDownEvents();\r\n            }\r\n        };\r\n        InputField.prototype.updateText = function () {\r\n            var text = '';\r\n            if (this.inputOptions.type === PhaserInput.InputType.password) {\r\n                for (var i = 0; i < this.value.length; i++) {\r\n                    text += '*';\r\n                }\r\n            }\r\n            else if (this.inputOptions.type === PhaserInput.InputType.number) {\r\n                var val = parseInt(this.value);\r\n                if (val < parseInt(this.inputOptions.min)) {\r\n                    text = this.value = this.domElement.value = this.inputOptions.min;\r\n                }\r\n                else if (val > parseInt(this.inputOptions.max)) {\r\n                    text = this.value = this.domElement.value = this.inputOptions.max;\r\n                }\r\n                else {\r\n                    text = this.value;\r\n                }\r\n            }\r\n            else {\r\n                text = this.value;\r\n            }\r\n            this.text.setText(text);\r\n            if (this.text.width > this.inputOptions.width) {\r\n                this.text.anchor.x = 1;\r\n                this.text.x = this.inputOptions.padding + this.inputOptions.width;\r\n            }\r\n            else {\r\n                switch (this.inputOptions.textAlign) {\r\n                    case 'left':\r\n                        this.text.anchor.set(0, 0);\r\n                        this.text.x = this.inputOptions.padding;\r\n                        break;\r\n                    case 'center':\r\n                        this.text.anchor.set(0.5, 0);\r\n                        this.text.x = this.inputOptions.padding + this.inputOptions.width / 2;\r\n                        break;\r\n                    case 'right':\r\n                        this.text.anchor.set(1, 0);\r\n                        this.text.x = this.inputOptions.padding + this.inputOptions.width;\r\n                        break;\r\n                }\r\n            }\r\n        };\r\n        InputField.prototype.updateCursor = function () {\r\n            if (this.text.width > this.inputOptions.width || this.inputOptions.textAlign === 'right') {\r\n                this.cursor.x = this.inputOptions.padding + this.inputOptions.width;\r\n            }\r\n            else {\r\n                switch (this.inputOptions.textAlign) {\r\n                    case 'left':\r\n                        this.cursor.x = this.inputOptions.padding + this.getCaretPosition();\r\n                        break;\r\n                    case 'center':\r\n                        this.cursor.x = this.inputOptions.padding + this.inputOptions.width / 2 - this.text.width / 2 + this.getCaretPosition();\r\n                        break;\r\n                }\r\n            }\r\n        };\r\n        InputField.prototype.getCaretPosition = function () {\r\n            var caretPosition = this.domElement.getCaretPosition();\r\n            if (-1 === caretPosition) {\r\n                return this.text.width;\r\n            }\r\n            var text = this.value;\r\n            if (this.inputOptions.type === PhaserInput.InputType.password) {\r\n                text = '';\r\n                for (var i = 0; i < this.value.length; i++) {\r\n                    text += '*';\r\n                }\r\n            }\r\n            this.offscreenText.setText(text.slice(0, caretPosition));\r\n            return this.offscreenText.width;\r\n        };\r\n        InputField.prototype.setCaretOnclick = function (e) {\r\n            var localX = (this.text.toLocal(new PIXI.Point(e.x, e.y), this.game.world)).x;\r\n            if (this.inputOptions.textAlign && this.inputOptions.textAlign === 'center') {\r\n                localX += this.text.width / 2;\r\n            }\r\n            var characterWidth = this.text.width / this.value.length;\r\n            var index = 0;\r\n            for (var i = 0; i < this.value.length; i++) {\r\n                if (localX >= i * characterWidth && localX <= (i + 1) * characterWidth) {\r\n                    index = i;\r\n                    break;\r\n                }\r\n            }\r\n            if (localX > (this.value.length - 1) * characterWidth) {\r\n                index = this.value.length;\r\n            }\r\n            this.startFocus();\r\n            this.domElement.setCaretPosition(index);\r\n            this.updateCursor();\r\n        };\r\n        InputField.prototype.updateSelection = function () {\r\n            if (this.domElement.hasSelection) {\r\n                var text = this.value;\r\n                if (this.inputOptions.type === PhaserInput.InputType.password) {\r\n                    text = '';\r\n                    for (var i = 0; i < this.value.length; i++) {\r\n                        text += '*';\r\n                    }\r\n                }\r\n                text = text.substring(this.domElement.caretStart, this.domElement.caretEnd);\r\n                this.offscreenText.setText(text);\r\n                this.selection.updateSelection(this.offscreenText.getBounds());\r\n                switch (this.inputOptions.textAlign) {\r\n                    case 'left':\r\n                        this.selection.x = this.inputOptions.padding;\r\n                        break;\r\n                    case 'center':\r\n                        this.selection.x = this.inputOptions.padding + this.inputOptions.width / 2 - this.text.width / 2;\r\n                        break;\r\n                }\r\n            }\r\n            else {\r\n                this.selection.clear();\r\n            }\r\n        };\r\n        InputField.prototype.zoomIn = function () {\r\n            if (PhaserInput.Zoomed) {\r\n                return;\r\n            }\r\n            var bounds = this.getBounds();\r\n            if (window.innerHeight > window.innerWidth) {\r\n                this.windowScale = this.game.width / (bounds.width * 1.5);\r\n            }\r\n            else {\r\n                this.windowScale = (this.game.width / 2) / (bounds.width * 1.5);\r\n            }\r\n            var offsetX = ((this.game.width - bounds.width * 1.5) / 2) / this.windowScale;\r\n            this.game.world.scale.set(this.game.world.scale.x * this.windowScale, this.game.world.scale.y * this.windowScale);\r\n            this.game.world.pivot.set(bounds.x - offsetX, bounds.y - this.inputOptions.padding * 2);\r\n            PhaserInput.Zoomed = true;\r\n        };\r\n        InputField.prototype.zoomOut = function () {\r\n            if (!PhaserInput.Zoomed) {\r\n                return;\r\n            }\r\n            this.game.world.scale.set(this.game.world.scale.x / this.windowScale, this.game.world.scale.y / this.windowScale);\r\n            this.game.world.pivot.set(0, 0);\r\n            PhaserInput.Zoomed = false;\r\n        };\r\n        InputField.prototype.keyListener = function (evt) {\r\n            this.value = this.getFormattedText(this.domElement.value);\r\n            if (evt.keyCode === 13) {\r\n                if (this.focusOutOnEnter) {\r\n                    this.endFocus();\r\n                }\r\n                return;\r\n            }\r\n            this.updateText();\r\n            this.updateCursor();\r\n            this.updateSelection();\r\n            evt.preventDefault();\r\n        };\r\n        InputField.prototype.destroy = function (destroyChildren) {\r\n            this.game.input.onDown.remove(this.checkDown, this);\r\n            this.focusIn.removeAll();\r\n            this.focusOut.removeAll();\r\n            this.domElement.destroy();\r\n            _super.prototype.destroy.call(this, destroyChildren);\r\n        };\r\n        InputField.prototype.resetText = function () {\r\n            this.setText();\r\n        };\r\n        InputField.prototype.setText = function (text) {\r\n            if (text === void 0) { text = ''; }\r\n            if (null !== this.placeHolder) {\r\n                if (text.length > 0) {\r\n                    this.placeHolder.visible = false;\r\n                }\r\n                else {\r\n                    this.placeHolder.visible = true;\r\n                }\r\n            }\r\n            this.value = this.getFormattedText(text);\r\n            this.domElement.value = this.value;\r\n            this.updateText();\r\n            this.updateCursor();\r\n            this.endFocus();\r\n        };\r\n        InputField.prototype.getFormattedText = function (text) {\r\n            switch (this.inputOptions.forceCase) {\r\n                default:\r\n                case ForceCase.none:\r\n                    return text;\r\n                case ForceCase.lower:\r\n                    return text.toLowerCase();\r\n                case ForceCase.upper:\r\n                    return text.toUpperCase();\r\n            }\r\n        };\r\n        return InputField;\r\n    }(Phaser.Sprite));\r\n    PhaserInput.InputField = InputField;\r\n})(PhaserInput || (PhaserInput = {}));\r\nvar PhaserInput;\r\n(function (PhaserInput) {\r\n    var InputBox = (function (_super) {\r\n        __extends(InputBox, _super);\r\n        function InputBox(game, inputOptions) {\r\n            var _this = _super.call(this, game, 0, 0) || this;\r\n            _this.bgColor = (inputOptions.backgroundColor) ? parseInt(inputOptions.backgroundColor.slice(1), 16) : 0xffffff;\r\n            _this.borderRadius = inputOptions.borderRadius = (typeof inputOptions.borderRadius === 'number') ? inputOptions.borderRadius : 0;\r\n            _this.borderWidth = inputOptions.borderWidth = (typeof inputOptions.borderWidth === 'number') ? inputOptions.borderWidth : 1;\r\n            _this.borderColor = (inputOptions.borderColor) ? parseInt(inputOptions.borderColor.slice(1), 16) : 0x959595;\r\n            _this.boxAlpha = inputOptions.fillAlpha;\r\n            _this.padding = inputOptions.padding;\r\n            var height = inputOptions.height;\r\n            var width = inputOptions.width;\r\n            var height;\r\n            if (inputOptions.font) {\r\n                height = Math.max(parseInt(inputOptions.font.substr(0, inputOptions.font.indexOf('px')), 10), height);\r\n            }\r\n            _this.boxHeight = _this.padding * 2 + height;\r\n            var width = inputOptions.width;\r\n            _this.boxWidth = _this.padding * 2 + width;\r\n            _this.drawBox();\r\n            return _this;\r\n        }\r\n        InputBox.prototype.resize = function (newWidth) {\r\n            this.boxWidth = this.padding * 2 + newWidth;\r\n            this.drawBox();\r\n        };\r\n        InputBox.prototype.drawBox = function () {\r\n            this.clear()\r\n                .beginFill(this.bgColor, this.boxAlpha)\r\n                .lineStyle(this.borderWidth, this.borderColor, this.boxAlpha);\r\n            if (this.borderRadius > 0) {\r\n                this.drawRoundedRect(0, 0, this.boxWidth, this.boxHeight, this.borderRadius);\r\n            }\r\n            else {\r\n                this.drawRect(0, 0, this.boxWidth, this.boxHeight);\r\n            }\r\n        };\r\n        return InputBox;\r\n    }(Phaser.Graphics));\r\n    PhaserInput.InputBox = InputBox;\r\n})(PhaserInput || (PhaserInput = {}));\r\nvar PhaserInput;\r\n(function (PhaserInput) {\r\n    var SelectionHighlight = (function (_super) {\r\n        __extends(SelectionHighlight, _super);\r\n        function SelectionHighlight(game, inputOptions) {\r\n            var _this = _super.call(this, game, inputOptions.padding, inputOptions.padding) || this;\r\n            _this.inputOptions = inputOptions;\r\n            return _this;\r\n        }\r\n        SelectionHighlight.prototype.updateSelection = function (rect) {\r\n            var color = Phaser.Color.webToColor(this.inputOptions.selectionColor);\r\n            this.clear();\r\n            this.beginFill(SelectionHighlight.rgb2hex(color), color.a);\r\n            this.drawRect(rect.x, rect.y, rect.width, rect.height - this.inputOptions.padding);\r\n        };\r\n        SelectionHighlight.rgb2hex = function (color) {\r\n            return parseInt((\"0\" + color.r.toString(16)).slice(-2) +\r\n                (\"0\" + color.g.toString(16)).slice(-2) +\r\n                (\"0\" + color.b.toString(16)).slice(-2), 16);\r\n        };\r\n        return SelectionHighlight;\r\n    }(Phaser.Graphics));\r\n    PhaserInput.SelectionHighlight = SelectionHighlight;\r\n})(PhaserInput || (PhaserInput = {}));\r\nvar PhaserInput;\r\n(function (PhaserInput) {\r\n    var TextMask = (function (_super) {\r\n        __extends(TextMask, _super);\r\n        function TextMask(game, inputOptions) {\r\n            var _this = _super.call(this, game, inputOptions.padding, inputOptions.padding) || this;\r\n            var height = inputOptions.height;\r\n            if (inputOptions.font) {\r\n                height = Math.max(parseInt(inputOptions.font.substr(0, inputOptions.font.indexOf('px')), 10), height);\r\n            }\r\n            _this.maskWidth = inputOptions.width;\r\n            _this.maskHeight = height * 1.3;\r\n            _this.drawMask();\r\n            return _this;\r\n        }\r\n        TextMask.prototype.resize = function (newWidth) {\r\n            this.maskWidth = newWidth;\r\n            this.drawMask();\r\n        };\r\n        TextMask.prototype.drawMask = function () {\r\n            this.clear()\r\n                .beginFill(0x000000)\r\n                .drawRect(0, 0, this.maskWidth, this.maskHeight)\r\n                .endFill();\r\n        };\r\n        return TextMask;\r\n    }(Phaser.Graphics));\r\n    PhaserInput.TextMask = TextMask;\r\n})(PhaserInput || (PhaserInput = {}));\r\nvar PhaserInput;\r\n(function (PhaserInput) {\r\n    PhaserInput.Zoomed = false;\r\n    PhaserInput.KeyboardOpen = false;\r\n    PhaserInput.onKeyboardOpen = new Phaser.Signal();\r\n    PhaserInput.onKeyboardClose = new Phaser.Signal();\r\n    var Plugin = (function (_super) {\r\n        __extends(Plugin, _super);\r\n        function Plugin(game, parent) {\r\n            var _this = _super.call(this, game, parent) || this;\r\n            _this.addInputFieldFactory();\r\n            return _this;\r\n        }\r\n        Plugin.prototype.addInputFieldFactory = function () {\r\n            Phaser.GameObjectFactory.prototype.inputField = function (x, y, inputOptions, group) {\r\n                if (group === undefined) {\r\n                    group = this.world;\r\n                }\r\n                var nineSliceObject = new PhaserInput.InputField(this.game, x, y, inputOptions);\r\n                return group.add(nineSliceObject);\r\n            };\r\n            Phaser.GameObjectCreator.prototype.inputField = function (x, y, inputOptions) {\r\n                return new PhaserInput.InputField(this.game, x, y, inputOptions);\r\n            };\r\n        };\r\n        return Plugin;\r\n    }(Phaser.Plugin));\r\n    Plugin.Zoomed = false;\r\n    Plugin.KeyboardOpen = false;\r\n    Plugin.onKeyboardOpen = new Phaser.Signal();\r\n    Plugin.onKeyboardClose = new Phaser.Signal();\r\n    PhaserInput.Plugin = Plugin;\r\n})(PhaserInput || (PhaserInput = {}));\r\n"]}